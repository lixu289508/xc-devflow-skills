# QA 测试角色规范要求

## 一、角色定义
资深测试工程师，负责 RD 开发完成后的功能测试、bug 提交、测试报告输出

## 二、核心职责
- 读取 RD 归档的开发成果
- 制定测试方案（需用户审核）
- 编写并执行测试计划
- 发现 bug 自动提交
- 输出测试报告

## 三、/qa skill（主入口）
存放位置：qa/.claude/skills/qa/SKILL.md
触发方式：/qa

### 六阶段流程

**阶段1：读取归档**
- 扫描 `../rd/prd/` 下已归档的文件夹（含需求.md、plan.md、report.md）
- AskUserQuestion 让用户选择要测试的需求
- 读取需求文档、执行计划、执行报告

**阶段2：制定测试方案** ⏸️ 需审核
- 分析需求功能点
- 结合前后端代码制定测试范围
- 输出：测试方案概要
- AskUserQuestion 请求用户审核确认

**阶段3：编写测试计划**
- 拆解测试用例
- 每个用例标注：测试点、预期结果、优先级
- 保存到 `.claude/plan/{需求名}-test.md`

**阶段4：执行测试**
- ⚠️ **执行前重新读取 CLAUDE.md 规范**
- Playwright 执行自动化测试
- 逐个用例执行，记录结果
- 每个用例完成后标记 `[✅]` 或 `[❌]`

**阶段5：提交Bug**
- 发现问题自动生成 bug 记录
- 生成唯一 ID：BUG-yyyymmdd-xxx
- 追加到 `bugs/pending.csv`（无空行、整行操作）
- 关联需求 ID 便于追溯

**阶段6：输出报告**
- 汇总测试结果（通过/失败/阻塞）
- 列出提交的 bug 清单
- 保存测试报告到归档目录

## 四、CSV 结构约定

**bugs/pending.csv（QA 写入，RD 读取）**
列：id,title,description,severity,reporter,created_at,status,related_prd
- id: BUG-yyyymmdd-xxx
- severity: P0/P1/P2/P3
- status: pending / in_progress
- related_prd: 关联的需求文件夹名

**bugs/archived.csv（RD 写入，QA 验收）**
列：id,title,description,severity,reporter,created_at,root_cause,fix_plan,affected_scope,fix_report,fixed_at,fixed_by

## 五、联动流程

```
RD /rd 完成 → prd/xxx/ 归档
              ↓
QA /qa 读取归档 → 测试方案 → [审核] → 执行测试 → 提交bug
              ↓
RD /fix 修复 → archived.csv
              ↓
QA 验收（可选）
```

## 六、QA 目录结构

```
qa/
├── CLAUDE.md                    # 测试规范
└── .claude/
    └── skills/
        └── qa/SKILL.md          # /qa 测试主入口
```

## 七、共享目录

bugs/ 目录放在 rd/ 和 qa/ 的同级或指定公共位置

## 八、CLAUDE.md 内容要求

- 角色定义（资深测试工程师）
- 文件修改规则（20行限制）
- CSV 操作规范（无空行、整行操作、字段顺序固定）
- MCP 工具规则（Playwright 复用、防超限）
- 禁止技术负债

## 九、CSV 操作规范

- 追加行时不能破坏现有数据
- 字段顺序固定，禁止调整
- 字段内容含逗号时用双引号包裹
- 删除/修改后确保无空行，整行重写

---
注意：创建 skills 时严格遵守 20 行限制，分批执行！
